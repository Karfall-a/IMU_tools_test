Тестирование IMU_tools пакета
=================

Обзор
--------

В данном репозитории содержится тестируемый пакет для фильтрации и визуализации данных IMU-датчиков imu_tools и пакет для запуска и тестирования фильтров на данных `imu_dataset.db3`. 

Установка
----------

### Предварительные требования

- Ubuntu 20.04
- ROS2 Galactic

### Установка из репозитория

1. Создайте рабочее пространство:
	`mkdir -p ~/ros2_ws/src`
	`cd ~/ros2_ws/src`
2. Клонируйте в созданную папку репозиторий:
	`git clone https://github.com/Karfall-a/IMU_tools_test.git`
3. Соберите пакет:
	`colcon build`
4. Не забудьте обновить среду:
	`source ~ros2_ws/install/setup.bash`

Поздравляем, Вы успешно справились с установкой!

Основные возможности
---------

Данный репозиторий представляет возможность тестирования и применения пакета imu_tools на данных, полученных в задании (далее - демо), и на любых других rosbag-файлах, содержащих IMU данные. А точнее:
- Запуск различных IMU фильтров (madgwick, complementary)
- Воспроизведение данных из rosbag-файлов
- Автоматическая настройка Rviz2 для визуализации
- Гибкая конфигурация через параметры запуска launch-файла

Ход работы
----------------------------

### Анализ работы imu_tools

Пакет imu_tools содержит в себе фильтры imu_complementary_filter и imu_filter_madgwick, а также встраиваемый плагин для Rviz2 для визуализации данных из IMU-датчиков. В рамках изучения пакета были найдены и устранены следующие ошибки:
- Неверные параметры для запуска узлов в launch-файлов (node_executable вместо executable, node_name вместо name)
- Устаревшие сведения об использовании плагина rviz_imu_plugin (Указана необходимость выбора /imu вместо /imu_link как Fixed Frame)

### Разработка пакета

Для быстрой настройки параметров и запуска визуализации был разработан пакет `imu_launcher`, который содержит:
- Launch-файл для одновременного запуска rosbag-файла, фильтра и Rviz2, в рамках которого созданы отдельные параметры для быстрого переключения между фильтрами и тестовыми данными
- Конфигурации Rviz для исключения необходимости ручной настройки Rviz под выбранный фильтр
- Rosbag-директория для хранения тестовых данных, в том числе демо-данные

### Итоги тестирования

После тестирования на демо-данных визуально было замечено, что наиболее рабочим вариантом является использование фильтра Complementary, повторяющего движения наиболее точно. Без использования фильтра поворот объекта не соответствует действительности и уменьшен по сравнению с реальным поворотом. Фильтр Madgwick имеет при визуализации лишние движения и низкую точность позиционирования по итогу. ![Результаты представлены в видео](demo.mp4).

-------

